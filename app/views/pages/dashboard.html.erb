<%= render "banner" %>

<div class="container mt-4">
  <%# MOOD BOX %>
  <div data-controller="mood" >
    <div class="moodcard" data-mood-target="moodcard">
      <% if @mood.empty? %>
        <%= render "mood" %>
      <% else %>
        <%= render @mood.first.mood %>
      <% end %>
    </div>
  </div>

  <%# CHART %>
  <h2>How You Have Been Doing?</h2>
  <div>
    <%= render partial: "shared/mood_chart", locals: {chart_data: @chart_data} %>
  </div>

  <%# CALENDAR AND MAP side-by-side %>
  <div class="d-flex justify-content-between mt-4">
    <%# calendar %>
    <%= render "calendar" %>
    <%# map %>
    <div style="width:800px; height:467px"
      data-controller="map"
      id="map-dashboard"
      data-map-markers-value="<%= @markers.to_json %>"
      data-map-api-key-value = "<%= ENV['MAPBOX_API_KEY'] %>">
    </div>
  </div>

  <%# LAST FEW ENTRIES %>
  <h2>Your last two entries</h2>
  <div class="entries-box">
    <% @entries.each do |entry| %>
      <%= render partial: "entries/entry_card", locals: { title: entry.title, date: entry.date, address: entry.address ,content: entry.content, photos: entry.photos } %>
    <% end %>
  </div>
</div>
